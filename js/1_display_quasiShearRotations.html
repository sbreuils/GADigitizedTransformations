<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>New Distribution of angles for bijective rotations</title>
  <style>
    body { margin: 0; }
    canvas { display: block; }
  </style>
</head>
<body>
<script src="http://threejs.org/build/three.js"></script>
<script src="http://threejs.org/examples/js/libs/stats.min.js"></script>
<script src=DigitizedGeometryCreation.js></script>
<script src=GridUtilities.js></script>
<script src=DigitizedTransformation.js></script>
<script src="lodash.js"></script>
<script>


  // Our Javascript will go here.
  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
  var camZPos = 8; // 24
  camera.position.z = camZPos;

  // add the grid of points
  let N=11;
  let posSquare = 3;
  let geometry_Grid = createGrid(N);

  console.log("create the z2 grid ...")

  let XminScene = -(~~(N/2));
  let XmaxScene = (~~(N/2));


  let geometry_Cells = createCells(N,XminScene,XmaxScene);
  scene.add(geometry_Cells );


  console.log("reflect the z2 grid using a bijective digitized reflection  ...")

  // let k = 1.0; // bijective digitized reflection parameters
  // let a = -k;
  // let b = k+1.0;
let a = -1.0;
  let b = 7.0;


  let reflectedGrid = digitalReflectionOfPoints(geometry_Grid,[a,b,0.0,0.0]);
  scene.add(reflectedGrid);

  let setRemaindersVectors = setOfRemainders(reflectedGrid,0xff0000);
  scene.add(setRemaindersVectors);

  // have to compute the digitization and the other digitized reflection
  let digitizedreflectedGrid = new THREE.Geometry();
  digitizedreflectedGrid.vertices = _.cloneDeep(reflectedGrid.geometry.vertices);//JSON.parse(JSON.stringify(points_i.geometry.vertices));
  digitizedreflectedGrid.colors = _.cloneDeep(reflectedGrid.geometry.colors);
  discretizeGeometry(digitizedreflectedGrid);
  // scene.add(digitizedreflectedGrid);

  let doubleReflectedGrid = digitalReflectionOfPoints(new THREE.Points(digitizedreflectedGrid,geometry_Grid.material),[a,b,0.0,0.0]);
  // scene.add(doubleReflectedGrid);
  let setRemaindersDoubleReflectedVectors = setOfRemainders(doubleReflectedGrid,0x00ff00);
  // scene.add(setRemaindersDoubleReflectedVectors);


  /////////////////////////         TIME TO RENDER        ///////////////////////////////
  // add the renderer to put the scene
  var renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth,window.innerHeight);
  renderer.setClearColor(0xffffff);
  document.body.appendChild( renderer.domElement );

  // Animate function and call it
  var animate = function () {
    requestAnimationFrame( animate );

    renderer.render( scene, camera );
  };

  animate();



</script>
</body>
</html>
